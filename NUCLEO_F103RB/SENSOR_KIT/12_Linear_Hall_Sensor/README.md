# ë¦¬ë‹ˆì–´ í™€ ì„¼ì„œ ëª¨ë“ˆ (Linear Hall Sensor Module)

STM32F103 NUCLEO ë³´ë“œë¥¼ ì´ìš©í•œ ë¦¬ë‹ˆì–´ í™€ ì„¼ì„œ í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸

## ðŸ“‹ ê°œìš”

ë¦¬ë‹ˆì–´ í™€ ì„¼ì„œëŠ” ìžê¸°ìž¥ì˜ ì„¸ê¸°ë¥¼ ì•„ë‚ ë¡œê·¸ ì „ì••ìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ì„¼ì„œìž…ë‹ˆë‹¤. ìžì„ì˜ ì ‘ê·¼ ê±°ë¦¬ì™€ ê·¹ì„±ì— ë”°ë¼ ì¶œë ¥ ì „ì••ì´ ì„ í˜•ì ìœ¼ë¡œ ë³€í™”í•˜ì—¬, ìœ„ì¹˜ ì¸¡ì •, íšŒì „ ê°ì§€, ì „ë¥˜ ì¸¡ì • ë“± ë‹¤ì–‘í•œ ì‘ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ðŸ”§ í•˜ë“œì›¨ì–´ êµ¬ì„±

### í•„ìš” ë¶€í’ˆ
| ë¶€í’ˆ | ìˆ˜ëŸ‰ | ì„¤ëª… |
|------|------|------|
| NUCLEO-F103RB | 1 | STM32F103RB ê°œë°œë³´ë“œ |
| ë¦¬ë‹ˆì–´ í™€ ì„¼ì„œ ëª¨ë“ˆ | 1 | 49E ë˜ëŠ” ìœ ì‚¬ ì„¼ì„œ |
| ë„¤ì˜¤ë””ë®´ ìžì„ | 1~2 | í…ŒìŠ¤íŠ¸ìš© |
| ì í¼ ì™€ì´ì–´ | 4 | ì—°ê²°ìš© |

### í•€ ì—°ê²°

```
ë¦¬ë‹ˆì–´ í™€ ì„¼ì„œ          NUCLEO-F103RB
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     VCC     â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    3.3V     â”‚
â”‚     GND     â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    GND      â”‚
â”‚     DO      â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    PA0      â”‚ (Digital Input)
â”‚     AO      â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    PA1      â”‚ (ADC1_IN1)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### íšŒë¡œë„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Linear Hall       â”‚
                    â”‚   Sensor Module     â”‚
    3.3V â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ VCC                 â”‚
                    â”‚                     â”‚
    GND  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ GND                 â”‚
                    â”‚                     â”‚
    PA0  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ DO  (Digital Out)   â”‚
                    â”‚     Threshold       â”‚
    PA1  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ AO  (Analog Out)    â”‚
                    â”‚     ~Vcc/2 at rest  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         N â† Magnet â†’ S
                              â†“
                         [Hall Sensor]
```

## ðŸ’» ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ëª…

### ì£¼ìš” ê¸°ëŠ¥

1. **ì•„ë‚ ë¡œê·¸ ìžê¸°ìž¥ ì¸¡ì •**: ADCë¥¼ í†µí•´ ìžê¸°ìž¥ ì„¸ê¸°ë¥¼ ì •ë°€ ì¸¡ì •
2. **ê·¹ì„± ê°ì§€**: ìžì„ì˜ Nê·¹/Sê·¹ ë°©í–¥ íŒë³„
3. **Gauss ë³€í™˜**: ADC ê°’ì„ ìžê¸°ìž¥ ê°•ë„(Gauss)ë¡œ ë³€í™˜
4. **ì‹œê°ì  í‘œì‹œ**: ë°” ê·¸ëž˜í”„ë¡œ ìžê¸°ìž¥ ì„¸ê¸° í‘œì‹œ
5. **ìžë™ ìº˜ë¦¬ë¸Œë ˆì´ì…˜**: ì‹œìž‘ ì‹œ ê¸°ì¤€ê°’ ìžë™ ì„¤ì •

### ë™ìž‘ ì›ë¦¬

```
        ìžê¸°ìž¥ ì—†ìŒ          Nê·¹ ì ‘ê·¼           Sê·¹ ì ‘ê·¼
           â”‚                  â”‚                  â”‚
           â–¼                  â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ~Vcc/2     â”‚   â”‚   > Vcc/2    â”‚   â”‚   < Vcc/2    â”‚
    â”‚   ~2048      â”‚   â”‚   ~3000+     â”‚   â”‚   ~1000-     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **í™€ íš¨ê³¼**: ì „ë¥˜ê°€ íë¥´ëŠ” ë„ì²´ì— ìžê¸°ìž¥ì´ ìˆ˜ì§ìœ¼ë¡œ ê°€í•´ì§€ë©´ ì „ë¥˜ ë°©í–¥ê³¼ ìˆ˜ì§ìœ¼ë¡œ ì „ì••ì´ ë°œìƒ
- **ì¶œë ¥ íŠ¹ì„±**: ìžê¸°ìž¥ì´ ì—†ì„ ë•Œ Vcc/2 ì¶œë ¥, ìžê¸°ìž¥ì— ë”°ë¼ ì„ í˜•ì ìœ¼ë¡œ ì¦ê°
- **ê°ë„**: 49E ì„¼ì„œ ê¸°ì¤€ ì•½ 1.3mV/Gauss

### ì½”ë“œ êµ¬ì¡°

```
main.c
â”œâ”€â”€ Hall_ReadDigital()      // ë””ì§€í„¸ ìž„ê³„ê°’ ì½ê¸°
â”œâ”€â”€ Hall_ReadAnalog()       // ì•„ë‚ ë¡œê·¸ ê°’ ì½ê¸°
â”œâ”€â”€ Hall_ReadAnalogAvg()    // í‰ê· ê°’ ê³„ì‚° (ë…¸ì´ì¦ˆ ê°ì†Œ)
â”œâ”€â”€ Hall_GetPolarity()      // ìžê·¹ íŒë³„ (N/S/ì—†ìŒ)
â”œâ”€â”€ Hall_GetGauss()         // Gauss ê°’ ë³€í™˜
â”œâ”€â”€ MX_GPIO_Init()          // GPIO ì´ˆê¸°í™”
â”œâ”€â”€ MX_ADC1_Init()          // ADC ì´ˆê¸°í™”
â””â”€â”€ MX_USART2_UART_Init()   // UART ì´ˆê¸°í™”
```

## ðŸ“Š ì¶œë ¥ ì˜ˆì‹œ

```
========================================
  Linear Hall Sensor Module Test Program
  NUCLEO-F103RB Board
========================================

DO Pin: PA0 (Digital Input)
AO Pin: PA1 (ADC1_IN1)
Center ADC Value: 2048

Calibrating... Remove magnets from sensor
Calibration complete. Rest value: 2051

ADC: 2048 | Gauss:    +0 | Digital: 0 | [          |          ] No field
ADC: 2156 | Gauss:   +65 | Digital: 0 | [          |=         ] No field
ADC: 2589 | Gauss:  +324 | Digital: 1 | [          |=====     ] NORTH (S approaching)
ADC: 3201 | Gauss:  +692 | Digital: 1 | [          |==========] NORTH (S approaching)
ADC: 1456 | Gauss:  -355 | Digital: 1 | [====      |          ] SOUTH (N approaching)
ADC: 1023 | Gauss:  -615 | Digital: 1 | [=========|          ] SOUTH (N approaching)
--- Range: Min=1023, Max=3201, Span=2178 ---
```

## âš™ï¸ ë¹Œë“œ ë° ì‹¤í–‰

### STM32CubeIDE ì‚¬ìš© ì‹œ

1. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± (STM32F103RB ì„ íƒ)
2. `main.c` íŒŒì¼ ë‚´ìš©ìœ¼ë¡œ êµì²´
3. ë¹Œë“œ ë° ë‹¤ìš´ë¡œë“œ

### ìº˜ë¦¬ë¸Œë ˆì´ì…˜

1. í”„ë¡œê·¸ëž¨ ì‹œìž‘ ì‹œ ìžì„ì„ ì„¼ì„œì—ì„œ ë©€ë¦¬ ë‘ 
2. 2ì´ˆ ë™ì•ˆ ê¸°ì¤€ê°’ ì¸¡ì •
3. ì´í›„ ìžì„ì„ ê°€ê¹Œì´ ê°€ì ¸ê°€ë©° í…ŒìŠ¤íŠ¸

## ðŸ”¬ ì‘ìš© ì˜ˆì œ

### 1. íšŒì „ ìœ„ì¹˜ ê°ì§€
```
ìžì„ì„ íšŒì „ì¶•ì— ë¶€ì°©í•˜ê³  ì„¼ì„œë¡œ ê°ë„ ì¸¡ì •
    â”Œâ”€â”€â”€â”
    â”‚ M â”‚  â† íšŒì „í•˜ëŠ” ìžì„
    â””â”€â”¬â”€â”˜
      â”‚
   [Sensor] â†’ ê°ë„ì— ë”°ë¥¸ ADC ê°’ ë³€í™”
```

### 2. ê±°ë¦¬ ì¸¡ì •
```
ìžì„ê³¼ ì„¼ì„œ ì‚¬ì´ ê±°ë¦¬ì— ë”°ë¥¸ ADC ê°’ ë³€í™” ë§¤í•‘
ê±°ë¦¬(mm): 0   5   10  15  20  25  30
ADCê°’:   3800 3200 2800 2400 2200 2100 2050
```

### 3. ë¬¸/ì°½ë¬¸ ê°œí ê°ì§€
```
í”„ë ˆìž„ì— ì„¼ì„œ, ë¬¸ì— ìžì„ ë¶€ì°©
ë‹«íž˜: ê°•í•œ ìžê¸°ìž¥ â†’ ë†’ì€ ADC
ì—´ë¦¼: ì•½í•œ ìžê¸°ìž¥ â†’ ì¤‘ê°„ ADC
```

## ðŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

| ë¬¸ì œ | ì›ì¸ | í•´ê²°ë°©ë²• |
|------|------|----------|
| ADC ê°’ ë¶ˆì•ˆì • | ë…¸ì´ì¦ˆ | í‰ê·  í•„í„° ìƒ˜í”Œ ìˆ˜ ì¦ê°€ |
| ê·¹ì„± ë°˜ëŒ€ | ì„¼ì„œ ë°©í–¥ | ì„¼ì„œë¥¼ 180Â° íšŒì „ |
| ê°ë„ ë‚®ìŒ | ìžì„ ì•½í•¨ | ê°•í•œ ë„¤ì˜¤ë””ë®´ ìžì„ ì‚¬ìš© |
| ì¶œë ¥ í¬í™” | ìžì„ ë„ˆë¬´ ê°€ê¹Œì›€ | ê±°ë¦¬ë¥¼ ëŠ˜ë¦¬ê±°ë‚˜ ì•½í•œ ìžì„ ì‚¬ìš© |

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ì •ì „ê¸° ì£¼ì˜**: í™€ ì„¼ì„œëŠ” ESDì— ë¯¼ê°í•  ìˆ˜ ìžˆìŒ
2. **ì˜¨ë„ ì˜í–¥**: ì˜¨ë„ì— ë”°ë¼ ì¶œë ¥ì´ ì•½ê°„ ë³€ë™ë  ìˆ˜ ìžˆìŒ
3. **ìžì„ ë°©í–¥**: Nê·¹/Sê·¹ ë°©í–¥ì— ë”°ë¼ ì¶œë ¥ì´ ë°˜ëŒ€ë¡œ ë³€í•¨
4. **ì™¸ë¶€ ìžê¸°ìž¥**: ì£¼ë³€ ì „ìžê¸°ê¸°ì˜ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìžˆìŒ

## ðŸ“š ì°¸ê³  ìžë£Œ

- [49E Hall Sensor Datasheet](https://www.alldatasheet.com/datasheet-pdf/pdf/55092/ETC/49E.html)
- [Hall Effect Sensor Application Guide](https://www.allegromicro.com/en/insights-and-innovations/technical-documents)
- [STM32F103 Reference Manual](https://www.st.com/resource/en/reference_manual/rm0008-stm32f101xx-stm32f102xx-stm32f103xx-stm32f105xx-and-stm32f107xx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf)

## ðŸ“œ ë¼ì´ì„ ìŠ¤

MIT License
