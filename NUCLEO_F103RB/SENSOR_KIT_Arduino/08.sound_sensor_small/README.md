# μ†ν• μ†λ¦¬μ„Όμ„ λ¨λ“ (Small Sound Sensor Module)

NUCLEO-F103RB λ³΄λ“λ¥Ό μ΄μ©ν• μ†ν• μ†λ¦¬μ„Όμ„ λ¨λ“ ν…μ¤νΈ μμ μ…λ‹λ‹¤.

## π“‹ κ°μ”

μ†ν• μ†λ¦¬μ„Όμ„ λ¨λ“μ€ μ½¤ν©νΈν• ν¬κΈ°λ΅ λ””μ§€ν„Έ μ¶λ ¥λ§ μ κ³µν•λ” κ°„λ‹¨ν• μ†λ¦¬ κ°μ§€ μ„Όμ„μ…λ‹λ‹¤. μ†λ¦¬κ°€ κ°μ§€λλ©΄ μ¶λ ¥ μƒνƒκ°€ λ³€κ²½λμ–΄ ON/OFF λ°©μ‹μ κ°μ§€μ— μ ν•©ν•©λ‹λ‹¤.

## π”§ ν•λ“μ›¨μ–΄ μ”κµ¬μ‚¬ν•­

- **λ³΄λ“**: NUCLEO-F103RB (STM32F103RBT6)
- **μ„Όμ„**: μ†ν• μ†λ¦¬μ„Όμ„ λ¨λ“
- **μ νΌ μ™€μ΄μ–΄**: 3κ°

## π“ ν•€ μ—°κ²°

| μ†λ¦¬μ„Όμ„ λ¨λ“ | NUCLEO-F103RB | μ„¤λ… |
|-------------|---------------|------|
| VCC | 3.3V | μ „μ› κ³µκΈ‰ |
| GND | GND | μ ‘μ§€ |
| OUT | PB3 (D3) | λ””μ§€ν„Έ μ¶λ ¥ |

### νλ΅λ„

```
NUCLEO-F103RB          μ†ν• μ†λ¦¬μ„Όμ„ λ¨λ“
    3.3V β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ VCC
    GND  β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ GND
    PB3  β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ OUT
```

## π’» μ†ν”„νΈμ›¨μ–΄ μ„¤μ •

### Arduino IDE μ„¤μ •

1. **λ³΄λ“ λ§¤λ‹μ €μ—μ„ STM32 λ³΄λ“ ν¨ν‚¤μ§€ μ„¤μΉ**
   - File β†’ Preferences β†’ Additional Board Manager URLsμ— μ¶”κ°€:
   ```
   https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json
   ```
   
2. **λ³΄λ“ μ„ νƒ**
   - Tools β†’ Board β†’ STM32 Boards β†’ Nucleo-64
   - Board Part Number: Nucleo F103RB

3. **ν¬νΈ μ„ νƒ**
   - Tools β†’ Port β†’ COMx (ν•΄λ‹Ή ν¬νΈ μ„ νƒ)

## π“ μ½”λ“ μ„¤λ…

### μ£Όμ” κΈ°λ¥

- **μΈν„°λ½νΈ κΈ°λ° κ°μ§€**: λΉ λ¥Έ μ‘λ‹µμ„ μ„ν• μ™Έλ¶€ μΈν„°λ½νΈ μ‚¬μ©
- **λ””λ°”μ΄μ¤ μ²λ¦¬**: μ¤λ™μ‘ λ°©μ§€λ¥Ό μ„ν• 50ms λ””λ°”μ΄μ¤
- **κ°μ§€ μΉ΄μ΄ν„°**: μ†λ¦¬ κ°μ§€ νμ λ„μ 
- **LED ν”Όλ“λ°±**: μ†λ¦¬ κ°μ§€ μ‹ λ‚΄μ¥ LED μ λ“±

### λ™μ‘ μ›λ¦¬

```
μ†λ¦¬ λ°μƒ β†’ μ„Όμ„ OUT ν•€ LOW β†’ μΈν„°λ½νΈ λ°μƒ β†’ LED μ λ“± + μΉ΄μ΄νΈ μ¦κ°€
```

### μ£Όμ” μƒμ

```cpp
#define DEBOUNCE_TIME   50      // λ””λ°”μ΄μ¤ μ‹κ°„ (ms)
#define LED_ON_TIME     200     // LED μ λ“± μ‹κ°„ (ms)
```

### μ£Όμ” ν•¨μ

```cpp
void resetSoundCount()                      // κ°μ§€ νμ μ΄κΈ°ν™”
unsigned long getSoundCount()               // κ°μ§€ νμ λ°ν™
bool detectSoundWithTimeout(timeout)        // νƒ€μ„μ•„μ›ƒ λ‚΄ μ†λ¦¬ κ°μ§€ ν™•μΈ
bool detectClapPattern(count, interval)     // λ°•μ ν¨ν„΄ κ°μ§€
```

## π–¥οΈ μ‹λ¦¬μ–Ό μ¶λ ¥ μμ‹

```
================================================
  μ†ν• μ†λ¦¬μ„Όμ„ ν…μ¤νΈ (Small Sound Sensor)
================================================
λ³΄λ“: NUCLEO-F103RB
μ„Όμ„ ν•€: PB3 (D3)
λ™μ‘ λ°©μ‹: μΈν„°λ½νΈ κΈ°λ°
------------------------------------------------
μ†λ¦¬λ¥Ό λ‚΄λ©΄ κ°μ§€λ©λ‹λ‹¤!
================================================

μ„Όμ„ μƒνƒ: HIGH (λ€κΈ°) | μ΄ κ°μ§€: 0ν
[1.25s] μ†λ¦¬ κ°μ§€! (1ν)
[1.87s] μ†λ¦¬ κ°μ§€! (2ν)
μ„Όμ„ μƒνƒ: HIGH (λ€κΈ°) | μ΄ κ°μ§€: 2ν
[3.42s] μ†λ¦¬ κ°μ§€! (3ν)
μ„Όμ„ μƒνƒ: HIGH (λ€κΈ°) | μ΄ κ°μ§€: 3ν
------------------------------------------------
μµκ·Ό 1λ¶„κ°„ μ†λ¦¬ κ°μ§€ νμ: 3ν
------------------------------------------------
```

## π“ μ‘μ© μμ 

### λ°•μλ΅ LED ν† κΈ€

```cpp
static bool roomLightOn = false;

if (soundTriggered) {
    soundTriggered = false;
    roomLightOn = !roomLightOn;
    digitalWrite(ROOM_LED, roomLightOn);
}
```

### 2ν λ°•μ ν¨ν„΄ κ°μ§€

```cpp
if (detectClapPattern(2, 500)) {
    Serial.println("2ν λ°•μ κ°μ§€! λ™μ‘ μ‹¤ν–‰");
    // μ›ν•λ” λ™μ‘ μν–‰
}
```

### μ†λ¦¬ κ°μ§€ μ•λ

```cpp
if (getSoundCount() > 10) {
    Serial.println("κ²½κ³ : κ³Όλ„ν• μ†μ κ°μ§€!");
    // μ•λ λ™μ‘
}
```

## π”„ κ³ κ°λ„ μ†λ¦¬μ„Όμ„μ™€μ λΉ„κµ

| νΉμ„± | μ†ν• μ†λ¦¬μ„Όμ„ | κ³ κ°λ„ μ†λ¦¬μ„Όμ„ |
|-----|-------------|---------------|
| ν¬κΈ° | μ‘μ (~1.5cm) | μ¤‘κ°„ (~3cm) |
| μ¶λ ¥ | λ””μ§€ν„Έλ§ | μ•„λ‚ λ΅κ·Έ + λ””μ§€ν„Έ |
| κ°λ„ μ΅°μ  | λ¶κ°€ | κ°€λ³€μ €ν•­μΌλ΅ μ΅°μ  |
| μ‚¬μ© μ©λ„ | ON/OFF κ°μ§€ | μ†λ¦¬ ν¬κΈ° μΈ΅μ • |
| κ°€κ²© | μ €λ ΄ | μ•½κ°„ λ†’μ |

## β οΈ μ£Όμμ‚¬ν•­

1. **μ „μ› μ „μ••**: 3.3V κ¶μ¥ (5V μ‚¬μ© μ‹ μ„Όμ„ ν™•μΈ ν•„μ”)
2. **κ°λ„ κ³ μ •**: κ°λ„ μ΅°μ  λ¶κ°€ν•λ―€λ΅ μ μ ν• κ±°λ¦¬μ—μ„ μ‚¬μ©
3. **λ…Έμ΄μ¦**: μ „κΈ°μ  λ…Έμ΄μ¦μ— λ―Όκ°ν•  μ μμ
4. **μΈν„°λ½νΈ ν•€**: μ‚¬μ©ν•λ” ν•€μ΄ μΈν„°λ½νΈλ¥Ό μ§€μ›ν•λ”μ§€ ν™•μΈ

## π” νΈλ¬λΈ”μν…

| μ¦μƒ | μ›μΈ | ν•΄κ²°λ°©λ²• |
|-----|------|---------|
| κ°μ§€ μ•λ¨ | λ°°μ„  μ¤λ¥ | VCC, GND, OUT μ—°κ²° ν™•μΈ |
| λ„λ¬΄ λ―Όκ°ν•¨ | μ„Όμ„ νΉμ„± | μ„Όμ„μ™€ μ†λ¦¬μ› κ±°λ¦¬ μ΅°μ  |
| κ³„μ† κ°μ§€λ¨ | λ…Έμ΄μ¦ λλ” κ³ μ¥ | μ „μ› λ¶„λ¦¬ ν›„ μ¬μ—°κ²°, μ„Όμ„ κµμ²΄ |
| μΈν„°λ½νΈ λ™μ‘ μ•ν•¨ | ν•€ μ„¤μ • μ¤λ¥ | μΈν„°λ½νΈ μ§€μ› ν•€ μ‚¬μ© ν™•μΈ |

## π“„ λΌμ΄μ„ μ¤

MIT License

## π”— μ°Έκ³  μλ£

- [STM32duino κ³µμ‹ λ¬Έμ„](https://github.com/stm32duino/Arduino_Core_STM32)
- [STM32F103 μΈν„°λ½νΈ κ°€μ΄λ“](https://www.st.com/resource/en/reference_manual/rm0008-stm32f101xx-stm32f102xx-stm32f103xx-stm32f105xx-and-stm32f107xx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf)
- [NUCLEO-F103RB ν•€λ§µ](https://os.mbed.com/platforms/ST-Nucleo-F103RB/)
