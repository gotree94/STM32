# Photo Interrupt Module - NUCLEO-F103RB

í¬í†  ì¸í„°ëŸ½íŠ¸(ê´‘ì°¨ë‹¨) ì„¼ì„œ ëª¨ë“ˆì„ NUCLEO-F103RB ë³´ë“œì—ì„œ ì•„ë‘ì´ë…¸ í™˜ê²½ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

## ðŸ“‹ ê°œìš”

í¬í†  ì¸í„°ëŸ½í„°ëŠ” ì ì™¸ì„  LEDì™€ í¬í† íŠ¸ëžœì§€ìŠ¤í„°ê°€ ë§ˆì£¼ë³´ê³  ìžˆëŠ” Uìž í˜•íƒœì˜ ì„¼ì„œìž…ë‹ˆë‹¤. ìŠ¬ë¡¯ ì‚¬ì´ì— ë¬¼ì²´ê°€ ì§€ë‚˜ê°€ë©´ ë¹›ì´ ì°¨ë‹¨ë˜ì–´ ê°ì§€ë©ë‹ˆë‹¤. íšŒì „ ì†ë„(RPM) ì¸¡ì •, ì¹´ìš´íŒ…, ìœ„ì¹˜ ê°ì§€ ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

## ðŸ”§ í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| ë³´ë“œ | NUCLEO-F103RB |
| ì„¼ì„œ | Photo Interrupter Module (ITR9608, GP1A57HRJ00F ë“±) |
| ì „ì•• | 3.3V ~ 5V |

## ðŸ“Œ í•€ ì—°ê²°

| ì„¼ì„œ ëª¨ë“ˆ | NUCLEO-F103RB | ì„¤ëª… |
|-----------|---------------|------|
| VCC | 3.3V ë˜ëŠ” 5V | ì „ì› |
| GND | GND | ì ‘ì§€ |
| DO | D2 (PA10) | ë””ì§€í„¸ ì¶œë ¥ (ì°¨ë‹¨ ê°ì§€) |
| AO | A0 (PA0) | ì•„ë‚ ë¡œê·¸ ì¶œë ¥ (ì„ íƒ) |

### íšŒë¡œë„

```
                    NUCLEO-F103RB
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚             â”‚
  Photo Interrupt  â”‚             â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚             â”‚
  â”‚  VCC â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ 3.3V       â”‚
  â”‚  GND â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ GND        â”‚
  â”‚  DO  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ D2 (PA10)  â”‚ â† ì¸í„°ëŸ½íŠ¸ ì‚¬ìš©
  â”‚  AO  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ A0 (PA0)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚             â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Photo Interrupter êµ¬ì¡°:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”Œâ”€â”€â”    â”Œâ”€â”€â”  â”‚
  â”‚  â”‚IRâ”‚ â–“â–“ â”‚PTâ”‚  â”‚  IR = ì ì™¸ì„  LED
  â”‚  â”‚  â”‚    â”‚  â”‚  â”‚  PT = í¬í† íŠ¸ëžœì§€ìŠ¤í„°
  â”‚  â””â”€â”€â”˜    â””â”€â”€â”˜  â”‚  â–“â–“ = ê°ì§€ ìŠ¬ë¡¯
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ’» ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì •

### Arduino IDE ì„¤ì •

1. **STM32duino ë³´ë“œ ë§¤ë‹ˆì € ì„¤ì¹˜**
   - File â†’ Preferences â†’ Additional Boards Manager URLsì— ì¶”ê°€:
     ```
     https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json
     ```
   - Tools â†’ Board â†’ Boards Manager â†’ "STM32" ê²€ìƒ‰ í›„ ì„¤ì¹˜

2. **ë³´ë“œ ì„ íƒ**
   - Tools â†’ Board â†’ STM32 Boards â†’ Nucleo-64
   - Tools â†’ Board part number â†’ Nucleo F103RB

## ðŸ“ ì‚¬ìš© ë°©ë²•

1. í•€ ì—°ê²°ì„ ì™„ë£Œí•©ë‹ˆë‹¤.
2. Arduino IDEì—ì„œ ì½”ë“œë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
3. ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ë¥¼ ì—´ê³  (115200 baud) ëŒ€ê¸°í•©ë‹ˆë‹¤.
4. ì„¼ì„œ ìŠ¬ë¡¯ì— ë¬¼ì²´ë¥¼ í†µê³¼ì‹œí‚¤ê±°ë‚˜ ì†ê°€ë½ìœ¼ë¡œ ê°€ë¦½ë‹ˆë‹¤.
5. ì°¨ë‹¨/í•´ì œ ì´ë²¤íŠ¸ì™€ íƒ€ì´ë°ì´ í‘œì‹œë©ë‹ˆë‹¤.

## ðŸ“Š ì‹œë¦¬ì–¼ ì¶œë ¥ ì˜ˆì‹œ

```
================================
Photo Interrupt Module Test
Board: NUCLEO-F103RB
================================

Block/Unblock the sensor slot...

-----------------------------
Event #1: >>> BLOCKED <<<
Time since start: 2.35 sec
-----------------------------
Event #2: >>> CLEAR <<<
Block duration: 156 ms
Time since start: 2.51 sec

=== Status Update ===
State: CLEAR
Total events: 2
Analog value: 3856
Last block: 156 ms | Last clear: 245 ms
====================

>>> RPM: 120.5 (1 slot/rev) <<<
```

## ðŸ” ê¸°ëŠ¥ ì„¤ëª…

### 1. ì´ë²¤íŠ¸ ê°ì§€
- ë¬¼ì²´ê°€ ìŠ¬ë¡¯ì„ ì°¨ë‹¨/í•´ì œí•  ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ ë°œìƒ
- ì¸í„°ëŸ½íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ íƒ€ì´ë° ì¸¡ì •

### 2. íƒ€ì´ë° ì¸¡ì •
- ì°¨ë‹¨ ì§€ì† ì‹œê°„ (Block duration)
- í•´ì œ ì§€ì† ì‹œê°„ (Clear duration)
- ë“€í‹° ì‚¬ì´í´ ê³„ì‚°

### 3. RPM ì¸¡ì •
- 1ì´ˆë§ˆë‹¤ íŽ„ìŠ¤ ìˆ˜ ê¸°ë°˜ RPM ê³„ì‚°
- ì¸ì½”ë” íœ ì˜ ìŠ¬ë¡¯ ìˆ˜ ì„¤ì • ê°€ëŠ¥

## ðŸ” ë™ìž‘ ì›ë¦¬

### ê´‘ì°¨ë‹¨ ì„¼ì„œ ì›ë¦¬

```
[ì¼ë°˜ ìƒíƒœ - Clear]
IR LED â”€â”€â”€â”€ ë¹› â”€â”€â”€â”€â–º í¬í† íŠ¸ëžœì§€ìŠ¤í„°
                    â†’ ì¶œë ¥: HIGH

[ì°¨ë‹¨ ìƒíƒœ - Blocked]
IR LED â”€â”€â”€â”€ ë¹› â”€â”€Xâ”€â”€ í¬í† íŠ¸ëžœì§€ìŠ¤í„°
            â†‘        â†’ ì¶œë ¥: LOW
          ë¬¼ì²´
```

### ì¸í„°ëŸ½íŠ¸ ê¸°ë°˜ ê°ì§€

- CHANGE ì—£ì§€ì—ì„œ ì¸í„°ëŸ½íŠ¸ ë°œìƒ
- ë””ë°”ìš´ì‹±ìœ¼ë¡œ ì˜¤ìž‘ë™ ë°©ì§€
- ë¹ ë¥¸ íšŒì „ë„ ì •í™•ížˆ ê°ì§€

## âš™ï¸ RPM ì¸¡ì • ì„¤ì •

ì¸ì½”ë” íœ ì˜ ìŠ¬ë¡¯ ìˆ˜ì— ë§žê²Œ ì„¤ì •í•˜ì„¸ìš”:

```cpp
// ìŠ¬ë¡¯ ìˆ˜ ì„¤ì • (ê¸°ë³¸ê°’: 1)
int slotsPerRevolution = 1;

// ì˜ˆ: 20ê°œ ìŠ¬ë¡¯ ì¸ì½”ë” íœ 
setSlotsPerRevolution(20);
```

### RPM ê³„ì‚° ê³µì‹

```
RPM = (íŽ„ìŠ¤ ìˆ˜ / ìŠ¬ë¡¯ ìˆ˜ / 2) Ã— 60

ì˜ˆ: 1ì´ˆì— 40íŽ„ìŠ¤, 20ìŠ¬ë¡¯ íœ 
RPM = (40 / 20 / 2) Ã— 60 = 60 RPM
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ì„¼ì„œ ìŠ¬ë¡¯ì— ë¨¼ì§€ê°€ ë¼ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.
- ì ì™¸ì„ ì€ ëˆˆì— ë³´ì´ì§€ ì•Šìœ¼ë¯€ë¡œ LED ìƒíƒœ í™•ì¸ì´ ì–´ë µìŠµë‹ˆë‹¤.
- ê³ ì† íšŒì „ ì¸¡ì • ì‹œ ë””ë°”ìš´ìŠ¤ ì‹œê°„ì„ ì¤„ì´ì„¸ìš”.
- ê°•í•œ ì™¸ë¶€ ì ì™¸ì„ ì´ ì˜¤ìž‘ë™ì„ ìœ ë°œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## ðŸŽ¯ ì‘ìš© ì˜ˆì œ

- ëª¨í„° RPM/ì†ë„ ì¸¡ì •
- ë¡œí„°ë¦¬ ì¸ì½”ë”
- ë¬¼ì²´ ì¹´ìš´íŒ… (ì»¨ë² ì´ì–´ ë²¨íŠ¸)
- ìœ„ì¹˜ ê°ì§€
- ì†ë„ ì œì–´ í”¼ë“œë°±
- í”„ë¦°í„° ìš©ì§€ ê°ì§€

## ðŸ“Š RPM ì¸¡ì •ìš© ì¸ì½”ë” íœ 

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    /   â–“â–“â–“   â–“â–“â–“ \
   â”‚  â–“       â–“â–“   â”‚
   â”‚ â–“    â—    â–“   â”‚   â–“ = ìŠ¬ë¡¯
   â”‚  â–“       â–“â–“   â”‚   â— = ì¶•
    \   â–“â–“â–“   â–“â–“â–“ /
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“ íŒŒì¼ êµ¬ì¡°

```
05_Photo_Interrupt_Module/
â”œâ”€â”€ Photo_Interrupt_Module.ino    # ë©”ì¸ ì•„ë‘ì´ë…¸ ì½”ë“œ
â””â”€â”€ README.md                     # ë¬¸ì„œ
```

## ðŸ”— ì°¸ê³  ìžë£Œ

- [STM32duino GitHub](https://github.com/stm32duino)
- [NUCLEO-F103RB User Manual](https://www.st.com/resource/en/user_manual/um1724-stm32-nucleo64-boards-mb1136-stmicroelectronics.pdf)
- [Photo Interrupter Datasheet (ITR9608)](https://www.everlight.com/file/ProductFile/ITR9608.pdf)

## ðŸ“œ ë¼ì´ì„¼ìŠ¤

MIT License
