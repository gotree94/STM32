# 버튼 스위치 모듈 (Push Button Switch Module)

NUCLEO-F103RB 보드를 이용한 버튼 스위치 모듈 테스트 프로젝트입니다.

## 📋 개요

버튼 스위치 모듈은 가장 기본적인 입력 장치입니다. 이 프로젝트에서는 디바운싱, 싱글클릭, 더블클릭, 롱프레스 등 다양한 버튼 이벤트를 처리하는 방법을 구현합니다.

## 🔧 하드웨어 구성

### 필요 부품
| 부품 | 수량 |
|------|------|
| NUCLEO-F103RB | 1 |
| 버튼 스위치 모듈 | 1 |
| 점퍼 와이어 | 3 |

### 핀 연결

| 모듈 핀 | NUCLEO 핀 | 설명 |
|---------|-----------|------|
| VCC | 3.3V / 5V | 전원 |
| GND | GND | 접지 |
| Signal | PA0 | 디지털 입력 |

### 회로도

```
NUCLEO-F103RB            버튼 스위치 모듈
    ┌─────┐               ┌─────────┐
    │ 3.3V├───────────────┤VCC      │
    │     │               │   [□]   │ ← 버튼
    │  GND├───────────────┤GND      │
    │     │               │         │
    │  PA0├───────────────┤Signal   │
    └─────┘               └─────────┘
```

## 💻 소프트웨어 설정

### Arduino IDE 설정
1. **보드 매니저**: STM32 MCU based boards 설치
2. **보드 선택**: Nucleo-64 → Nucleo F103RB
3. **시리얼 포트**: 해당 COM 포트 선택

### 라이브러리
- 기본 라이브러리만 사용 (추가 설치 불필요)

## 📝 동작 설명

### 버튼 이벤트

| 이벤트 | 조건 | 동작 |
|--------|------|------|
| 싱글 클릭 | 한 번 누르고 뗌 | LED 토글 |
| 더블 클릭 | 300ms 내 두 번 클릭 | LED 빠른 깜빡임 3회 |
| 롱프레스 | 1초 이상 누름 | LED 천천히 깜빡임 |

### 디바운싱

기계식 스위치는 접점이 닿을 때 바운싱(튕김)이 발생합니다. 이를 소프트웨어적으로 필터링합니다.

```
실제 버튼 신호:    ████▃▃██▃▃████████████████
디바운싱 후:       ________________________________████████████████████████
                   ← 50ms 대기 →
```

## 🖥️ 시리얼 출력 예시

```
================================
버튼 스위치 모듈 테스트
NUCLEO-F103RB
================================

버튼 동작:
  - 클릭: LED 토글
  - 더블클릭: LED 빠른 깜빡임 3회
  - 롱프레스(1초): LED 천천히 깜빡임

[이벤트] 버튼 눌림
[이벤트] 버튼 뗌 (150ms)
[통계] 총 클릭 횟수: 1
[동작] LED ON
[이벤트] 버튼 눌림
[이벤트] 버튼 뗌 (120ms)
[이벤트] 더블클릭!
[동작] LED 빠른 깜빡임
[이벤트] 버튼 눌림
[이벤트] 롱프레스 감지!
[동작] LED 천천히 깜빡임
```

## 🔧 파라미터 조정

| 파라미터 | 기본값 | 설명 |
|----------|--------|------|
| `debounceDelay` | 50ms | 디바운싱 시간 |
| `longPressTime` | 1000ms | 롱프레스 판정 시간 |
| `doubleClickTime` | 300ms | 더블클릭 판정 시간 |

## 📊 버튼 이벤트 타이밍 다이어그램

```
싱글 클릭:
버튼:  ▼━━━━━▲
       |     |
       |<150>|   (짧은 누름)
       |     |
       |     +--- 300ms 후 싱글클릭 확정

더블 클릭:
버튼:  ▼━━▲  ▼━━▲
       |  |  |  |
       |<--->|<->|
         100   100  (두 번의 짧은 누름)
       |<------>|
          <300ms    (더블클릭 판정)

롱프레스:
버튼:  ▼━━━━━━━━━━━━━━━━━▲
       |                 |
       |<--- 1000ms --->|  (롱프레스 발동)
       |<--- 1500ms ---->| (총 누름 시간)
```

## 📚 응용 분야

- 사용자 인터페이스 입력
- 메뉴 네비게이션
- 모드 선택
- 게임 컨트롤러
- 설정 조작

## 🔧 다중 버튼 확장 예시

여러 버튼을 사용할 경우 구조체와 배열을 활용할 수 있습니다.

```cpp
struct Button {
  int pin;
  bool state;
  bool lastState;
  unsigned long lastDebounceTime;
};

Button buttons[] = {
  {PA0, HIGH, HIGH, 0},
  {PA1, HIGH, HIGH, 0},
  {PA2, HIGH, HIGH, 0}
};
```

## ⚠️ 주의사항

- 내부 풀업 저항 사용 시 버튼을 누르면 LOW
- 외부 풀업/풀다운 저항 사용 시 회로에 맞게 로직 수정
- 접점 수명을 위해 불필요하게 강하게 누르지 않기

## 🔍 트러블슈팅

| 증상 | 해결 방법 |
|------|----------|
| 한 번 눌러도 여러 번 인식 | debounceDelay 값 증가 |
| 더블클릭이 잘 안 됨 | doubleClickTime 값 증가 |
| 롱프레스가 너무 빨리/늦게 발동 | longPressTime 값 조정 |
| 버튼 인식 안 됨 | 배선 확인, INPUT_PULLUP 확인 |

## 📄 라이선스

MIT License
