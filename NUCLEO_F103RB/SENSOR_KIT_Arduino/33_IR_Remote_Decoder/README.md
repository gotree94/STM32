# IR Remote Decoder (IR 리모컨 디코더)

NUCLEO-F103RB 보드를 이용한 IR 리모컨 신호 디코딩 프로젝트

## 개요

IR 리모컨에서 입력되는 신호를 NEC 프로토콜로 디코딩하여 주소(Address)와 명령(Command) 값을 시리얼로 PC에 출력합니다.

## 기능

- NEC 프로토콜 완전 디코딩
- NEC Extended (16-bit 주소) 지원
- 리피트 코드 감지
- 일반 리모컨 버튼 이름 인식
- 통계 기능 (디코딩 수, 리피트 수, 에러 수)

## 하드웨어 연결

### 핀 배치

| 핀 | 기능 | 설명 |
|----|------|------|
| PA0 (A0) | IR RX | IR 수신 모듈 신호 입력 |
| PA5 (D13) | LED | 디코딩 성공 시 깜빡임 |

### 회로도

```
IR Receiver (TSOP1838)         NUCLEO-F103RB
┌─────────────┐               ┌─────────────┐
│    OUT ─────┼───────────────┤ PA0 (A0)    │
│    GND ─────┼───────────────┤ GND         │
│    VCC ─────┼───────────────┤ 3.3V        │
└─────────────┘               └─────────────┘
```

## 사용 방법

1. 회로 연결 후 코드 업로드
2. 시리얼 모니터 열기 (115200 baud)
3. IR 리모컨으로 버튼 누르기
4. 디코딩된 결과 확인

### 시리얼 명령어

| 명령 | 기능 |
|------|------|
| `s` | 통계 출력 |
| `r` | 통계 리셋 |
| `h` | 도움말 |

## 시리얼 출력 예시

```
╔════════════════════════════════════════╗
║   IR Remote Decoder - NUCLEO-F103RB    ║
║   NEC Protocol Decoder                 ║
╚════════════════════════════════════════╝

Point your remote at the IR receiver and press any button...

┌──────────────────────────────────────┐
│ [DECODED] NEC Standard          │
│ Address: 0x00                          │
│ Command: 0x0C (12)                    │
│ Button:  1                          │
└──────────────────────────────────────┘
Raw 32-bit: 0xF30CFF00

[REPEAT] Addr=0x00, Cmd=0x0C (1)
[REPEAT] Addr=0x00, Cmd=0x0C (1)
```

## NEC 프로토콜

### 프레임 구조

```
┌─────────┬─────────┬────────┬─────────┬────────┬─────────┬──────┐
│ Leader  │ Leader  │ Addr   │ ~Addr   │ Cmd    │ ~Cmd    │ Stop │
│ Pulse   │ Space   │ 8-bit  │ 8-bit   │ 8-bit  │ 8-bit   │ bit  │
│ 9ms     │ 4.5ms   │        │         │        │         │      │
└─────────┴─────────┴────────┴─────────┴────────┴─────────┴──────┘
```

### 비트 인코딩

```
Bit '0':                    Bit '1':
  ┌──┐                        ┌──┐
  │  │                        │  │
──┘  └────                 ───┘  └──────────
  560us 560us                 560us 1690us
  (1.12ms total)              (2.25ms total)
```

### 리피트 코드

버튼을 계속 누르고 있으면 약 110ms 간격으로 전송됨:

```
┌─────────┬─────────┬──────┐
│ Leader  │ Repeat  │ Stop │
│ 9ms     │ 2.25ms  │ bit  │
└─────────┴─────────┴──────┘
```

## 지원 리모컨

대부분의 NEC 프로토콜 리모컨 지원:
- 저가형 IR 리모컨 키트
- 일부 TV 리모컨
- MP3 플레이어 리모컨
- LED 스트립 리모컨

## 코드 커스터마이징

### 버튼 이름 추가

```cpp
const ButtonName_t commonButtons[] = {
    {0x00, 0x45, "CH-"},
    {0x00, 0x46, "CH"},
    // 여기에 추가
    {주소, 명령, "버튼이름"},
};
```

## 문제 해결

| 문제 | 해결 방법 |
|------|----------|
| 디코딩 실패 | NEC 프로토콜이 아닐 수 있음 |
| 노이즈 | 형광등 피하기, IR 수신기 방향 조정 |
| 리피트만 출력 | 첫 번째 코드가 누락됨, 버튼 짧게 누르기 |

## 라이선스

MIT License
