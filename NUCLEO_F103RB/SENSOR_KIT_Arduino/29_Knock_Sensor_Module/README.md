# Knock Sensor Module - NUCLEO-F103RB

ë…¸í¬(ì§„ë™) ì„¼ì„œ ëª¨ë“ˆì„ NUCLEO-F103RB ë³´ë“œì—ì„œ ì•„ë‘ì´ë…¸ í™˜ê²½ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

## ðŸ“‹ ê°œìš”

ì••ì „(Piezoelectric) ì†Œìžë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶©ê²©, ì§„ë™, ë…¸í¬ë¥¼ ê°ì§€í•˜ëŠ” ì„¼ì„œ ëª¨ë“ˆìž…ë‹ˆë‹¤. ë¬¼ë¦¬ì  ì¶©ê²©ì´ ê°€í•´ì§€ë©´ ì „ì••ì´ ë°œìƒí•˜ë©°, ì´ë¥¼ ì•„ë‚ ë¡œê·¸ ë° ë””ì§€í„¸ ì‹ í˜¸ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.

## ðŸ”§ í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| ë³´ë“œ | NUCLEO-F103RB |
| ì„¼ì„œ | Knock/Vibration Sensor Module (KY-031 ë˜ëŠ” í˜¸í™˜) |
| ì „ì•• | 3.3V ~ 5V |

## ðŸ“Œ í•€ ì—°ê²°

| ì„¼ì„œ ëª¨ë“ˆ | NUCLEO-F103RB | ì„¤ëª… |
|-----------|---------------|------|
| VCC | 3.3V ë˜ëŠ” 5V | ì „ì› |
| GND | GND | ì ‘ì§€ |
| DO | D2 (PA10) | ë””ì§€í„¸ ì¶œë ¥ (ë…¸í¬ ê°ì§€) |
| AO | A0 (PA0) | ì•„ë‚ ë¡œê·¸ ì¶œë ¥ (ì§„ë™ ì„¸ê¸°) |

### íšŒë¡œë„

```
                    NUCLEO-F103RB
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚             â”‚
  Knock Sensor     â”‚             â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚             â”‚
  â”‚  VCC â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ 3.3V       â”‚
  â”‚  GND â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ GND        â”‚
  â”‚  DO  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ D2 (PA10)  â”‚ â† ì¸í„°ëŸ½íŠ¸ ì‚¬ìš©
  â”‚  AO  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ A0 (PA0)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚             â”‚
                   â”‚    [POT]    â”‚ â† ê°ë„ ì¡°ì ˆ
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ’» ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì •

### Arduino IDE ì„¤ì •

1. **STM32duino ë³´ë“œ ë§¤ë‹ˆì € ì„¤ì¹˜**
   - File â†’ Preferences â†’ Additional Boards Manager URLsì— ì¶”ê°€:
     ```
     https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json
     ```
   - Tools â†’ Board â†’ Boards Manager â†’ "STM32" ê²€ìƒ‰ í›„ ì„¤ì¹˜

2. **ë³´ë“œ ì„ íƒ**
   - Tools â†’ Board â†’ STM32 Boards â†’ Nucleo-64
   - Tools â†’ Board part number â†’ Nucleo F103RB

## ðŸ“ ì‚¬ìš© ë°©ë²•

1. í•€ ì—°ê²°ì„ ì™„ë£Œí•©ë‹ˆë‹¤.
2. Arduino IDEì—ì„œ ì½”ë“œë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
3. ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ë¥¼ ì—´ê³  (115200 baud) ëŒ€ê¸°í•©ë‹ˆë‹¤.
4. ì„¼ì„œë¥¼ ë‘ë“œë¦¬ê±°ë‚˜ ì§„ë™ì„ ê°€í•©ë‹ˆë‹¤.
5. ë…¸í¬ íŒ¨í„´ì´ ê¸°ë¡ë˜ê³  ë¶„ì„ë©ë‹ˆë‹¤.

## ðŸ“Š ì‹œë¦¬ì–¼ ì¶œë ¥ ì˜ˆì‹œ

```
================================
Knock Sensor Module Test
Board: NUCLEO-F103RB
================================
Tap or knock on the sensor...

-----------------------------
>>> KNOCK #1 DETECTED! <<<
Intensity: 1245 (Medium)
Power: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 30%
-----------------------------
>>> KNOCK #2 DETECTED! <<<
Intensity: 2156 (Hard)
Power: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 52%
-----------------------------
>>> KNOCK #3 DETECTED! <<<
Intensity: 456 (Light)
Power: [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 11%

=============================
Knock Pattern Complete: 3 knocks
Pattern timing (ms): 0, 342, 687
Intervals (ms): 342, 345
=============================
```

## ðŸ” ë…¸í¬ ê°•ë„ ë¶„ë¥˜

| ADC ê°’ | ê°•ë„ | ì„¤ëª… |
|--------|------|------|
| 0 - 199 | Very Light | ë§¤ìš° ì•½í•¨ (ì‚´ì§ í„°ì¹˜) |
| 200 - 799 | Light | ì•½í•¨ (ê°€ë²¼ìš´ ë…¸í¬) |
| 800 - 1499 | Medium | ë³´í†µ (ì¼ë°˜ ë…¸í¬) |
| 1500+ | Hard | ê°•í•¨ (ê°•í•œ ì¶©ê²©) |

## ðŸŽµ ë…¸í¬ íŒ¨í„´ ì¸ì‹

ì½”ë“œëŠ” ì—°ì†ëœ ë…¸í¬ë¥¼ íŒ¨í„´ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤:

```
ë…¸í¬ ê°ì§€ â†’ ì‹œê°„ ê¸°ë¡ â†’ 500ms ëŒ€ê¸° â†’ íŒ¨í„´ ì™„ë£Œ íŒì •
```

- ê° ë…¸í¬ì˜ íƒ€ì´ë°ì´ ê¸°ë¡ë©ë‹ˆë‹¤.
- ë…¸í¬ ê°„ ê°„ê²©ì´ ê³„ì‚°ë©ë‹ˆë‹¤.
- ë¹„ë°€ ë…¸í¬ íŒ¨í„´ ì¸ì‹ì— í™œìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## ðŸ” ë™ìž‘ ì›ë¦¬

### ì••ì „ ì†Œìž (Piezoelectric)

```
ë¬¼ë¦¬ì  ì¶©ê²©/ì§„ë™
      â†“
ì••ì „ ì†Œìžì— ê¸°ê³„ì  ìŠ¤íŠ¸ë ˆìŠ¤
      â†“
ì „ì•• ë°œìƒ (ì••ì „ íš¨ê³¼)
      â†“
ì•„ë‚ ë¡œê·¸/ë””ì§€í„¸ ì‹ í˜¸ ì¶œë ¥
```

### ì¸í„°ëŸ½íŠ¸ ê¸°ë°˜ ê°ì§€

- FALLING ì—£ì§€ì—ì„œ ì¸í„°ëŸ½íŠ¸ ë°œìƒ
- ë””ë°”ìš´ì‹±ìœ¼ë¡œ ì˜¤ìž‘ë™ ë°©ì§€
- ë¹ ë¥¸ ë°˜ì‘ ì†ë„ ë³´ìž¥

## âš™ï¸ íŒŒë¼ë¯¸í„° ì¡°ì •

í™˜ê²½ê³¼ ìš©ë„ì— ë§žê²Œ ì¡°ì •í•˜ì„¸ìš”:

```cpp
#define DEBOUNCE_TIME       50      // ë””ë°”ìš´ìŠ¤ ì‹œê°„ (ms)
#define KNOCK_TIMEOUT       500     // íŒ¨í„´ ì¢…ë£Œ íŒì • ì‹œê°„ (ms)
#define LIGHT_KNOCK         200     // ì•½í•œ ë…¸í¬ ìž„ê³„ê°’
#define MEDIUM_KNOCK        800     // ì¤‘ê°„ ë…¸í¬ ìž„ê³„ê°’
#define HARD_KNOCK          1500    // ê°•í•œ ë…¸í¬ ìž„ê³„ê°’
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ì„¼ì„œê°€ ë‹¨ë‹¨í•œ í‘œë©´ì— ê³ ì •ë˜ì–´ì•¼ ì •í™•í•œ ê°ì§€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì£¼ë³€ ì§„ë™ì´ ë§Žì€ í™˜ê²½ì—ì„œëŠ” ìž„ê³„ê°’ì„ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.
- ë„ˆë¬´ ê°•í•œ ì¶©ê²©ì€ ì„¼ì„œë¥¼ ì†ìƒì‹œí‚¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- ëª¨ë“ˆì˜ ê°€ë³€ì €í•­ìœ¼ë¡œ ê°ë„ë¥¼ ì¡°ì ˆí•˜ì„¸ìš”.

## ðŸŽ¯ ì‘ìš© ì˜ˆì œ

- ë¹„ë°€ ë…¸í¬ ë„ì–´ë½
- ì§„ë™ ê°ì§€ ì•ŒëžŒ
- ë“œëŸ¼ íŒ¨ë“œ / íƒ€ì•…ê¸° ì¸í„°íŽ˜ì´ìŠ¤
- ì¶©ê²© ê°ì§€ ë¡œê¹…
- ê²Œìž„ ì»¨íŠ¸ë¡¤ëŸ¬

## ðŸ“ íŒŒì¼ êµ¬ì¡°

```
04_Knock_Sensor_Module/
â”œâ”€â”€ Knock_Sensor_Module.ino    # ë©”ì¸ ì•„ë‘ì´ë…¸ ì½”ë“œ
â””â”€â”€ README.md                  # ë¬¸ì„œ
```

## ðŸ”— ì°¸ê³  ìžë£Œ

- [STM32duino GitHub](https://github.com/stm32duino)
- [NUCLEO-F103RB User Manual](https://www.st.com/resource/en/user_manual/um1724-stm32-nucleo64-boards-mb1136-stmicroelectronics.pdf)
- [Piezoelectric Sensor Principles](https://www.electronics-tutorials.ws/io/io_6.html)

## ðŸ“œ ë¼ì´ì„¼ìŠ¤

MIT License
